controller_manager:
  ros__parameters:
    update_rate: 100  # 100Hz è¶³å¤Ÿ MoveIt ä½¿ç”¨

    # 1. çŠ¶æ€å¹¿æ’­å‘˜ (å¿…é¡»æœ‰ï¼Œå¦åˆ™ RViz é‡Œæœºå™¨äººä¸æ˜¾ç¤º)
    joint_state_broadcaster:
      type: joint_state_broadcaster/JointStateBroadcaster

    # 2. æ‰‹è‡‚æ§åˆ¶å™¨
    fr3_arm_controller:
      type: joint_trajectory_controller/JointTrajectoryController

    # 3. å¤¹çˆªæ§åˆ¶å™¨
    fr3_hand_controller:
      type: joint_trajectory_controller/JointTrajectoryController

fr3_arm_controller:
  ros__parameters:
    # è¿™é‡Œçš„å…³èŠ‚åå¿…é¡»å’Œä½ çš„ ros2_control æ ‡ç­¾é‡Œçš„ä¸€å­—ä¸å·®
    joints:
      - fr3_joint1
      - fr3_joint2
      - fr3_joint3
      - fr3_joint4
      - fr3_joint5
      - fr3_joint6
      - fr3_joint7
    command_interfaces:
      - position
    state_interfaces:
      - position
      - velocity
    # é™åˆ¶ MoveIt è§„åˆ’å¤±è´¥æ—¶çš„å®¹å·®
    state_publish_rate: 100.0
    action_monitor_rate: 20.0

fr3_hand_controller:
  ros__parameters:
    joints:
      - fr3_finger_joint1
      # - fr3_finger_joint2
    command_interfaces:
      - position
    state_interfaces:
      - position
      - velocity

    # # ğŸ‘‡ å…³é”®ä¿®æ”¹ 2: åŠ ä¸Šå®½å®¹åº¦é…ç½® (è§£å†³ Goal Rejected)
    # constraints:
    #   goal_time: 2.0               # å…è®¸æ™š 2 ç§’åˆ°è¾¾
    #   stopped_velocity_tolerance: 0.05 # å…è®¸åœä¸‹æ—¶è¿˜æœ‰ç‚¹é€Ÿåº¦
    #   fr3_finger_joint1:
    #     trajectory: 0.05           # è½¨è¿¹å…è®¸ 0.05å¼§åº¦/ç±³çš„è¯¯å·®
    #     goal: 0.05                 # ç»ˆç‚¹å…è®¸ 0.05å¼§åº¦/ç±³çš„è¯¯å·®
    #   fr3_finger_joint2:
    #     trajectory: 0.05
    #     goal: 0.05
